<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="LDAP testing">
  <meta name="author" content="Jingshao Chen">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous">

  <title>Testing Page for express-passport-ldap-mongoose</title>

  <!-- Custom styles for this template -->
  <link href="signin.css" rel="stylesheet">

  <script>
    function login() {
      var username = document.getElementById('username').value
      var password = document.getElementById('password').value

      var url = '/login';
      var data = { username: username, password: password };

      fetch(url, {
        method: 'POST', // or 'PUT'
        body: JSON.stringify(data),
        headers: new Headers({
          'Content-Type': 'application/json'
        })
      }).then(res => res.json())
        .catch(error => alert('unexpected error'))
        .then(response => {
          if (response.success) {
            alert('Login succeed')
            console.log(response.user)
          } else {
            alert('login failed. Message: ' + response.message)
          }
        })
    }
  </script>
</head>

<body class="text-center">
  <div class="container">
    <h1>Testing Page for express-passport-ldap-mongoose</h1>
    <form class="form-signin">

        <h1 class="h3 mb-3 font-weight-normal">Log in</h1>
    
      <p>
        Use
        <code>gauss</code> and
        <code>password</code> to test.
      </p>


      <div class="form-label-group">
        <input type="text" id="username" name="username" autocomplete="username" class="form-control" placeholder="Username" required autofocus/>
      </div>

      <div class="form-label-group">
        <input id="password" name="password" type="password" autocomplete="current-password" class="form-control" placeholder="Password"
          required/>
      </div>
      <div>
        <button type="button" class="btn btn-lg btn-primary btn-block" onclick="login();">Login</button>
      </div>
    </form>
    <p class="text-muted small">Online LDAP test server provided by <a href="https://www.forumsys.com/tutorials/integration-how-to/ldap/online-ldap-test-server/">forumsys</a></p>
  </div>
</body>

</html>